<div class="container" style="width: 500px;">

  <div class="container d-flex rounded text-center my-3 py-3 bg-light justify-content-around align-items-center">
    <a href="/">
      <button type="button" class="btn btn-info">顯示全部</button>
    </a>
    <form action="/" style="width: 200px;">
      <div>
        <div class="form-group mb-1">
          <input type="month" class="form-control" name="time" placeholder="月份" onchange="submit()" value="{{time}}">
        </div>


        <div class="form-group mb-0">
          <select class="form-control" name="category" onchange="submit()">
            <option value='' {{#is category '' }}selected{{/is}}>類別</option>
            {{#each category}}
            <option {{#is ../categoryChoosen ./this.name }}selected{{/is}}>{{ this.name }}</option>
            {{/each}}
          </select>
        </div>
      </div>
    </form>
  </div>



  <div class="" style="width: 600px">
    <div class="row p-2">
      <div class="col-4 d-flex justify-content-center align-items-center">
        <div>
          <h6>{{time}}{{#if time}}｜{{else}}全部{{/if}}{{categoryChoosen}}</h6>
          <h3>總金額：</h3>
        </div>
      </div>
      <div class="col-6 d-flex justify-content-end pr-5">
        <h1 style="font-size: 3.8rem; color: salmon">{{#sum totalAmount}}{{/sum}}</h1>
      </div>
      <a href="/records/new" class="col-2 d-flex justify-content-center align-items-center">
        <button type="button" class="btn btn-danger">新增支出</button>
      </a>
    </div>



  </div>

  <div class="my-3" style="width: 600px; height: 500px;overflow: auto">

    {{#each record}}
    <div class="d-flex record-row">
      <div class="row py-2 px-3" style="width: 100%;">
        <div class="col-1 d-flex align-items-center">
          <i class="category {{ this.category.image }}"></i>
        </div>
        <div class="col-7 d-flex flex-column justify-content-center">
          <h5>{{ this.name }}</h5>
          <h6>{{ this.date }} ‧
            <i class="fas fa-map-marker-alt"></i> {{ this.merchant }}
          </h6>
        </div>
        <div class="col-3 d-flex justify-content-end align-items-center">
          <h5>{{ this.amount }}</h5>
        </div>
      </div>

      <div class="btn-group">
        <a class="btn btn-light d-flex align-items-center" href="/records/{{this._id}}/edit">
          <i class="fas fa-pen"></i>
        </a>
        <form action="/records/{{this._id}}?_method=DELETE" method="post" class="d-inline-flex">
          <button class="btn btn-light" type="submit">
            <i class="fas fa-trash-alt"></i>
          </button>
        </form>
      </div>

    </div>
    {{/each}}
  </div>
</div>